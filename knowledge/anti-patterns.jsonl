{"id":"AP-001","type":"frontend","name":"Non-null Assertion","description":"Using ! operator causes runtime crashes","bad_code":"const item = items.find(i => i.id === id)!;","good_code":"const item = items.find(i => i.id === id);\nif (!item) throw new ItemNotFoundError(id);","severity":"critical","tags":["typescript","null","crash","p0"]}
{"id":"AP-002","type":"frontend","name":"O(n²) Lookup Pattern","description":"Using find() inside map() causes O(n²) performance","bad_code":"items.map(i => others.find(o => o.id === i.otherId))","good_code":"const otherMap = new Map(others.map(o => [o.id, o]));\nitems.map(i => otherMap.get(i.otherId))","severity":"critical","tags":["performance","map","p0","loop"]}
{"id":"AP-003","type":"backend","name":"Missing Tenant ID","description":"SQL query without tenant_id causes data leak","bad_code":"SELECT * FROM jobs WHERE id = $1","good_code":"SELECT * FROM jobs WHERE id = $1 AND tenant_id = $2","severity":"critical","tags":["security","tenant","sql","p0"]}
{"id":"AP-004","type":"backend","name":"SQL String Concatenation","description":"String interpolation in SQL causes injection","bad_code":"await db.query(`SELECT * FROM users WHERE email = '${email}'`)","good_code":"await db.query('SELECT * FROM users WHERE email = $1', [email])","severity":"critical","tags":["security","injection","sql","p0"]}
{"id":"AP-005","type":"backend","name":"Hardcoded Secrets","description":"API keys in code are security risk","bad_code":"const apiKey = 'sk-1234567890';","good_code":"const apiKey = process.env.API_KEY;","severity":"critical","tags":["security","secrets","env","p0"]}
{"id":"AP-006","type":"frontend","name":"Missing Loading State","description":"No feedback during async operations","bad_code":"useEffect(() => { fetchData(); }, []);","good_code":"const [loading, setLoading] = useState(true);\nuseEffect(() => {\n  fetchData().finally(() => setLoading(false));\n}, []);\nif (loading) return <Spinner />;","severity":"high","tags":["ux","loading","async","p1"]}
{"id":"AP-007","type":"frontend","name":"Missing Error State","description":"Errors silently fail without user feedback","bad_code":"try { await api.call(); } catch (e) { console.error(e); }","good_code":"try {\n  await api.call();\n} catch (e) {\n  setError(e.message);\n  toast.error('Operation failed');\n}","severity":"high","tags":["ux","error","feedback","p1"]}
{"id":"AP-008","type":"frontend","name":"Missing Empty State","description":"Empty data shows blank screen","bad_code":"return <ul>{items.map(i => <li>{i.name}</li>)}</ul>;","good_code":"if (items.length === 0) return <EmptyState />;\nreturn <ul>{items.map(i => <li key={i.id}>{i.name}</li>)}</ul>;","severity":"medium","tags":["ux","empty","list","p2"]}
{"id":"AP-009","type":"frontend","name":"Using any Type","description":"any type bypasses TypeScript safety","bad_code":"function process(data: any) { return data.value; }","good_code":"interface Data { value: string; }\nfunction process(data: Data) { return data.value; }","severity":"high","tags":["typescript","types","safety","p1"]}
{"id":"AP-010","type":"backend","name":"Route File Too Large","description":"Route files over 100 LOC are hard to maintain","bad_code":"// 500+ lines in single route file","good_code":"// Extract business logic to service\n// Keep routes < 100 LOC\nrouter.post('/', async (req, res, next) => {\n  const result = await Service.create(req.body);\n  res.json(result);\n});","severity":"medium","tags":["architecture","maintainability","routes","p1"]}
{"id":"AP-011","type":"backend","name":"Business Logic in Routes","description":"Routes should only handle HTTP, not business rules","bad_code":"router.post('/', async (req, res) => {\n  const discount = price * 0.1;\n  const total = price - discount;\n  await db.insert(...);\n});","good_code":"router.post('/', async (req, res) => {\n  const result = await OrderService.create(req.body);\n  res.json(result);\n});","severity":"medium","tags":["architecture","separation","routes","p1"]}
{"id":"AP-012","type":"frontend","name":"Magic Numbers","description":"Unexplained numbers make code hard to understand","bad_code":"if (probability > 0.5) { ... }\nsetTimeout(() => {}, 5000);","good_code":"const HIGH_RISK_THRESHOLD = 0.5;\nconst DEBOUNCE_MS = 5000;\nif (probability > HIGH_RISK_THRESHOLD) { ... }","severity":"medium","tags":["readability","constants","maintainability","p2"]}
{"id":"AP-013","type":"backend","name":"Missing Webhook Signature Check","description":"Unverified webhooks allow spoofing","bad_code":"router.post('/webhook', (req, res) => {\n  processWebhook(req.body);\n});","good_code":"router.post('/webhook', (req, res) => {\n  if (!verifySignature(req)) return res.status(401).end();\n  processWebhook(req.body);\n});","severity":"critical","tags":["security","webhook","signature","p0"]}
{"id":"AP-014","type":"frontend","name":"Uncontrolled Form Input","description":"Missing value/onChange causes state sync issues","bad_code":"<input type=\"text\" />","good_code":"<input\n  type=\"text\"\n  value={value}\n  onChange={(e) => setValue(e.target.value)}\n/>","severity":"medium","tags":["react","form","input","p2"]}
{"id":"AP-015","type":"frontend","name":"Missing Key in List","description":"React needs keys for efficient re-rendering","bad_code":"items.map(item => <div>{item.name}</div>)","good_code":"items.map(item => <div key={item.id}>{item.name}</div>)","severity":"medium","tags":["react","list","key","p2"]}
{"pattern":"Submitting individual files while global build is broken","context":"TypeScript typecheck failing globally","why_bad":"No individual task can be approved while system-wide build errors exist","task_id":"TASK-007"}
